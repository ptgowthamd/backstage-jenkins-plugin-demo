"use strict";(()=>{(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2389],{54748:(W,v,e)=>{e.d(v,{M:()=>t});var g=e(58837),o=e(71677),c=e(14041),f=e(72501);const a=(0,g.A)({container:{overflow:"visible !important"},typo:{fontSize:"inherit",overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box","-webkit-line-clamp":({line:u})=>u||1,"-webkit-box-orient":"vertical"}},{name:"BackstageOverflowTooltip"});function t(u){const P=a(u);return c.createElement(o.Ay,{title:u.title??(u.text||""),placement:u.placement},c.createElement(f.A,{className:P.typo,variant:"inherit"},u.text))}},88419:(W,v,e)=>{e.d(v,{t:()=>a});var g=e(72501),o=e(14041),c=e(90338),f=e(18139);const a=t=>{const{apiEntity:u}=t,s=(0,f.gf)(c.P).getApiDefinitionWidget(u),M=s?s.title:u.spec.type;return o.createElement(g.A,{component:"span"},M)}},2389:(W,v,e)=>{e.r(v),e.d(v,{ConsumedApisCard:()=>V,HasApisCard:()=>k,ProvidedApisCard:()=>w});var g=e(97214),o=e(72501),c=e(16400),f=e(39557),a=e(35301),t=e(14041),u=e(17400),P=e(15485),s=e(88419),M=e(18139),B=e(77125),b=e(64947),n=e(76891),R=e(93453),y=e(46805),r=e(61477),O=e(38605),d=e(31653),T=e(58837),I=e(90338),x=e(77536);const E=(0,T.A)(l=>({fullHeightDialog:{height:"calc(100% - 64px)"},root:{display:"flex",flexGrow:1,width:"100%",height:"100%"},tabs:{borderRight:`1px solid ${l.palette.divider}`,flexShrink:0},tabContents:{flexGrow:1,overflowX:"auto"},title:{color:l.palette.text.primary,wordBreak:"break-word",fontSize:l.typography.h3.fontSize,marginBottom:0},type:{textTransform:"uppercase",fontSize:11,opacity:.8,marginBottom:l.spacing(1),color:l.palette.text.primary}}));function C(l){const{children:m,value:i,index:D,...L}=l,h=E();return t.createElement("div",{role:"tabpanel",hidden:i!==D,id:`vertical-tabpanel-${D}`,"aria-labelledby":`vertical-tab-${D}`,className:h.tabContents,...L},i===D&&t.createElement(B.A,{pl:3,pr:3},m))}function z(l){return{id:`vertical-tab-${l}`,"aria-controls":`vertical-tabpanel-${l}`}}function j(l){const{open:m,entity:i,onClose:D}=l,[L,h]=t.useState(0),A=E();(0,t.useEffect)(()=>{h(0)},[m]);const p=(0,M.gf)(I.P).getApiDefinitionWidget(i);let J=0,Q=0;return t.createElement(n.A,{fullWidth:!0,maxWidth:"xl",open:m,onClose:D,"aria-labelledby":"api-definition-dialog-title",PaperProps:{className:A.fullHeightDialog}},t.createElement(r.A,{id:"api-definition-dialog-title",disableTypography:!0},t.createElement(o.A,{className:A.type},"API - ",p?.title??"Raw"),t.createElement(o.A,{className:A.title,variant:"h1"},i.metadata.title??i.metadata.name)),t.createElement(y.A,{dividers:!0,className:A.root},t.createElement(d.A,{orientation:"vertical",variant:"scrollable",value:L,onChange:(q,_)=>h(_),"aria-label":"API definition options",className:A.tabs},p?t.createElement(O.A,{label:p.title,...z(J++)}):null,t.createElement(O.A,{label:"Raw",...z(J++)})),p?t.createElement(C,{value:L,index:Q++},p.component(i.spec.definition)):null,t.createElement(C,{value:L,index:Q++},t.createElement(x.e,{definition:i.spec.definition,language:p?.rawLanguage??i.spec.type}))),t.createElement(R.A,null,t.createElement(b.A,{onClick:D,color:"primary"},"Close")))}function N(){return{title:"Type",field:"spec.type",render:l=>t.createElement(s.t,{apiEntity:l})}}const $=({apiEntity:l})=>{const[m,i]=(0,t.useState)(!1);return t.createElement(t.Fragment,null,t.createElement(P.A,{"aria-label":"Toggle API Definition Dialog",onClick:()=>i(!m),value:m},t.createElement(u.A,null)),t.createElement(j,{entity:l,open:m,onClose:()=>i(!1)}))};function X(){return{title:"API Definition",render:l=>t.createElement($,{apiEntity:l})}}const F=[a.s.columns.createEntityRefColumn({defaultKind:"API"}),a.s.columns.createSystemColumn(),a.s.columns.createOwnerColumn(),N(),a.s.columns.createSpecLifecycleColumn(),a.s.columns.createMetadataDescriptionColumn(),X()];var S=e(21332),K=e(96872),H=e(99338),G=e(62112),Z=e(75202);const V=l=>{const{variant:m="gridItem",title:i="Consumed APIs",columns:D=F,tableOptions:L={}}=l,{entity:h}=(0,c.tN)(),{entities:A,loading:U,error:p}=(0,f.E)(h,{type:g.Ey});return U?t.createElement(S.n,{variant:m,title:i},t.createElement(K.k,null)):p||!A?t.createElement(S.n,{variant:m,title:i},t.createElement(H.B,{severity:"error",title:"Could not load APIs",message:t.createElement(G.z,{text:`${p}`,language:"text"})})):t.createElement(a.s,{title:i,variant:m,emptyContent:t.createElement("div",{style:{textAlign:"center"}},t.createElement(o.A,{variant:"body1"},"This ",h.kind.toLocaleLowerCase("en-US")," does not consume any APIs."),t.createElement(o.A,{variant:"body2"},t.createElement(Z.N_,{to:"https://backstage.io/docs/features/software-catalog/descriptor-format#specconsumesapis-optional"},"Learn how to change this."))),columns:D,tableOptions:L,entities:A})},Y=[a.s.columns.createEntityRefColumn({defaultKind:"API"}),a.s.columns.createOwnerColumn(),N(),a.s.columns.createSpecLifecycleColumn(),a.s.columns.createMetadataDescriptionColumn()],k=l=>{const{variant:m="gridItem",title:i="APIs",columns:D=Y,tableOptions:L={}}=l,{entity:h}=(0,c.tN)(),{entities:A,loading:U,error:p}=(0,f.E)(h,{type:g.sA,kind:"API"});return U?t.createElement(S.n,{variant:m,title:i},t.createElement(K.k,null)):p||!A?t.createElement(S.n,{variant:m,title:i},t.createElement(H.B,{severity:"error",title:"Could not load APIs",message:t.createElement(G.z,{text:`${p}`,language:"text"})})):t.createElement(a.s,{title:i,variant:m,emptyContent:t.createElement("div",{style:{textAlign:"center"}},t.createElement(o.A,{variant:"body1"},"This ",h.kind.toLocaleLowerCase("en-US")," does not contain any APIs."),t.createElement(o.A,{variant:"body2"},t.createElement(Z.N_,{to:"https://backstage.io/docs/features/software-catalog/descriptor-format#kind-api"},"Learn how to change this."))),columns:D,tableOptions:L,entities:A})},w=l=>{const{variant:m="gridItem",title:i="Provided APIs",columns:D=F,tableOptions:L={}}=l,{entity:h}=(0,c.tN)(),{entities:A,loading:U,error:p}=(0,f.E)(h,{type:g.ZD});return U?t.createElement(S.n,{variant:m,title:i},t.createElement(K.k,null)):p||!A?t.createElement(S.n,{variant:m,title:i},t.createElement(H.B,{severity:"error",title:"Could not load APIs",message:t.createElement(G.z,{text:`${p}`,language:"text"})})):t.createElement(a.s,{title:i,variant:m,emptyContent:t.createElement("div",{style:{textAlign:"center"}},t.createElement(o.A,{variant:"body1"},"This ",h.kind.toLocaleLowerCase("en-US")," does not provide any APIs."),t.createElement(o.A,{variant:"body2"},t.createElement(Z.N_,{to:"https://backstage.io/docs/features/software-catalog/descriptor-format#specprovidesapis-optional"},"Learn how to change this."))),columns:D,tableOptions:L,entities:A})}},77536:(W,v,e)=>{e.d(v,{e:()=>c});var g=e(14041),o=e(62112);const c=f=>g.createElement(o.z,{text:f.definition,language:f.language,showCopyCodeButton:!0})},35301:(W,v,e)=>{e.d(v,{s:()=>R});var g=e(58837),o=e(14041),c=e(97214),f=e(54748),a=e(699),t=e(37281),u=e(14158),P=e(53318);const s=Object.freeze({createEntityRefColumn(y){const{defaultKind:r}=y;function O(d){return d.metadata?.title||(0,P.S)(d,{defaultKind:r})}return{title:"Name",highlight:!0,customFilterAndSearch(d,T){return O(T).includes(d)},customSort(d,T){return O(d).localeCompare(O(T))},render:d=>o.createElement(t.z,{entityRef:d,defaultKind:r,title:d.metadata?.title})}},createEntityRelationColumn(y){const{title:r,relation:O,defaultKind:d,filter:T}=y;function I(E){return(0,a.t)(E,O,T)}function x(E){return I(E).map(C=>(0,P.S)(C,{defaultKind:d})).join(", ")}return{title:r,customFilterAndSearch(E,C){return x(C).includes(E)},customSort(E,C){return x(E).localeCompare(x(C))},render:E=>o.createElement(u.i,{entityRefs:I(E),defaultKind:d})}},createOwnerColumn(){return this.createEntityRelationColumn({title:"Owner",relation:c.vv,defaultKind:"group"})},createDomainColumn(){return this.createEntityRelationColumn({title:"Domain",relation:c.jn,defaultKind:"domain",filter:{kind:"domain"}})},createSystemColumn(){return this.createEntityRelationColumn({title:"System",relation:c.jn,defaultKind:"system",filter:{kind:"system"}})},createMetadataDescriptionColumn(){return{title:"Description",field:"metadata.description",render:y=>o.createElement(f.M,{text:y.metadata.description,placement:"bottom-start",line:2})}},createSpecLifecycleColumn(){return{title:"Lifecycle",field:"spec.lifecycle"}},createSpecTypeColumn(){return{title:"Type",field:"spec.type"}}}),M=[s.createEntityRefColumn({defaultKind:"system"}),s.createDomainColumn(),s.createOwnerColumn(),s.createMetadataDescriptionColumn()],B=[s.createEntityRefColumn({defaultKind:"component"}),s.createSystemColumn(),s.createOwnerColumn(),s.createSpecTypeColumn(),s.createSpecLifecycleColumn(),s.createMetadataDescriptionColumn()];var b=e(29021);const n=(0,g.A)(y=>({empty:{padding:y.spacing(2),display:"flex",justifyContent:"center"}})),R=y=>{const{entities:r,title:O,emptyContent:d,variant:T="gridItem",columns:I,tableOptions:x={}}=y,E=n(),C={minWidth:"0",width:"100%"};return T==="gridItem"&&(C.height="calc(100% - 10px)"),o.createElement(b.X,{columns:I,title:O,style:C,emptyContent:d&&o.createElement("div",{className:E.empty},d),options:{search:!1,paging:!1,actionsColumnIndex:-1,padding:"dense",draggable:!1,...x},data:r})};R.columns=s,R.systemEntityColumns=M,R.componentEntityColumns=B},39557:(W,v,e)=>{e.d(v,{E:()=>a});var g=e(78560),o=e(18139),c=e(73466),f=e(30043);function a(t,u){const P=u?.type?.toLocaleLowerCase("en-US"),s=u?.kind?.toLocaleLowerCase("en-US"),M=(0,o.gf)(f.v),{loading:B,value:b,error:n}=(0,c.A)(async()=>{const R=t.relations?.filter(r=>(!P||r.type.toLocaleLowerCase("en-US")===P)&&(!s||(0,g.KU)(r.targetRef).kind===s));if(!R?.length)return[];const{items:y}=await M.getEntitiesByRefs({entityRefs:R.map(r=>r.targetRef)});return y.filter(r=>!!r)},[t,P,s]);return{entities:b,loading:B,error:n}}},15485:(W,v,e)=>{e.d(v,{A:()=>B});var g=e(39850),o=e(89575),c=e(14041),f=e(9546),a=e(268),t=e(7031),u=e(97740),P=e(11192),s=function(n){return{root:(0,o.A)({},n.typography.button,{boxSizing:"border-box",borderRadius:n.shape.borderRadius,padding:11,border:"1px solid ".concat((0,a.X4)(n.palette.action.active,.12)),color:(0,a.X4)(n.palette.action.active,.38),"&$selected":{color:n.palette.action.active,backgroundColor:(0,a.X4)(n.palette.action.active,.12),"&:hover":{backgroundColor:(0,a.X4)(n.palette.action.active,.15)},"& + &":{borderLeft:0,marginLeft:0}},"&$disabled":{color:(0,a.X4)(n.palette.action.disabled,.12)},"&:hover":{textDecoration:"none",backgroundColor:(0,a.X4)(n.palette.text.primary,.05),"@media (hover: none)":{backgroundColor:"transparent"},"&$disabled":{backgroundColor:"transparent"}}}),disabled:{},selected:{},label:{width:"100%",display:"inherit",alignItems:"inherit",justifyContent:"inherit"},sizeSmall:{padding:7,fontSize:n.typography.pxToRem(13)},sizeLarge:{padding:15,fontSize:n.typography.pxToRem(15)}}},M=c.forwardRef(function(n,R){var y=n.children,r=n.classes,O=n.className,d=n.disabled,T=d===void 0?!1:d,I=n.disableFocusRipple,x=I===void 0?!1:I,E=n.onChange,C=n.onClick,z=n.selected,j=n.size,N=j===void 0?"medium":j,$=n.value,X=(0,g.A)(n,["children","classes","className","disabled","disableFocusRipple","onChange","onClick","selected","size","value"]),F=function(K){C&&(C(K,$),K.isDefaultPrevented())||E&&E(K,$)};return c.createElement(u.A,(0,o.A)({className:(0,f.default)(r.root,O,T&&r.disabled,z&&r.selected,N!=="medium"&&r["size".concat((0,P.A)(N))]),disabled:T,focusRipple:!x,ref:R,onClick:F,onChange:E,value:$,"aria-pressed":z},X),c.createElement("span",{className:r.label},y))});const B=(0,t.A)(s,{name:"MuiToggleButton"})(M)}}]);})();

//# sourceMappingURL=2389.9c46d811.chunk.js.map